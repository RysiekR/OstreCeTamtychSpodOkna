Player player = new();

//inicializacja wyswietlania mapy i wsadzenie gracza na mape
Display.Initialize(Display.baseMap,player);

// !!! ACHTUNG ! ACHTUNG !!! endless loop
//oddanie kontroli nad pozycja gracza w rece gracza
while (true) 
{
player.UpdatePos();
    
}
class Player
{
    public int row = 3;
    public int col = 5;
    public void UpdatePos()
    {
        int oldRow = row;
        int oldCol = col;
        bool hitObstacle = false;

        switch (Console.ReadKey(true).Key)
        {
            case ConsoleKey.W :
                if(!(Display.baseMap[row-1][col] == 'W')) { row--; }
                else { hitObstacle = true; }
                break;
            case ConsoleKey.S:
                if (!(Display.baseMap[row + 1][col] == 'W')) { row++; }
                else { hitObstacle = true; }     
                break;
            case ConsoleKey.A:
                if (!(Display.baseMap[row][col - 1] == 'W')) { col--; }
                else { hitObstacle = true; }
                break;
            case ConsoleKey.D:
                if (!(Display.baseMap[row][col + 1] == 'W')) { col++; }
                else { hitObstacle = true; }
                break;
        }
        Console.SetCursorPosition(this.col, this.row);
        Console.Write("#");

        //if wall was not hit remember to clear old position
        if (!hitObstacle)
        {
            Console.SetCursorPosition(oldCol, oldRow);
            Console.Write(" ");
            hitObstacle = false;
        }
    }
}

class Display
{
    //no mapa kurwa
    public static readonly string[] baseMap =
{
    "WWWWWWWWWWWW",
    "W          W",
    "W          W",
    "W          W",
    "W          W",
    "W          W",
    "W          W",
    "W          W",
    "W          W",
    "WWWWWWWWWWWW",
};

    // TODO zamiast strin[] map wsadzic enuma chyba bedzzie ladnie i fajnie :)
    public static void Initialize(string[] map,Player gracz)
    {

        //narysowanie mapy "row by row"
        foreach (string row in map)
        {
            Console.WriteLine(row);

        }

        //wrzucenie gracza na mape
        Console.SetCursorPosition(gracz.col, gracz.row);
        Console.Write("#");
        Console.CursorVisible = false;
    }
}
